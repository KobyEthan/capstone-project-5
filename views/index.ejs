<%- include('partials/header.ejs'); -%>

<div class="container" id="heading">
    <h2>
        <%= listHeader %>
    </h2>
</div>
</div class="container">
    <% for (let item of listItems){%>
      <div class="item">

        <form action="/delete" method="POST">
           <input type="checkbox" onchange="this.form.submit()" name="deletedItemId" value="<%= item.id %>"/>
        </form>

        <p id="content<%item.id%>">
           <%= item.content %>
        </p>

        <form class="edit" action="/edit" method="POST">
            <input type="hidden" name="updatedItemId" value="<%=item.id%>"/>
            <input id="input<%=item.id%>" type="text" name="updatedItemContent" value="<%=item.title%>" autocomplete="off"
                autofocus="true" hidden="true"/>
            <button id="done<%=item.id%>" class="edit-btn" type="submit" hidden>done</button>
        </form>
        <button id="edit<%=item.id%>" class="edit" onClick="switchBtn('<%=item.id%>')">edit</button>
      </div>
    <%}%>

    <form class="item" action="/add" method="POST">
        <input type="text" name="newItem" placeholder="Add a new Item" autocomplete="off" autofocus="true"/>
        <button class="add-btn" type="submit" name="list" value="<%=listHeader%>">add</button>
    </form>
</div>

<script>
    function switchBtn(id) {
      document.getElementById("content" + id).setAttribute("hidden", true)
      document.getElementById("edit" + id).setAttribute("hidden", true)
      document.getElementById("done" + id).removeAttribute("hidden")
      document.getElementById("input" + id).removeAttribute("hidden")
    }
</script>

<%- include('partials/footer.ejs'); -%>